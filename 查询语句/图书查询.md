```plsql
-- 1.查询所有图书的信息
SELECT
"b".BOOKNO AS "编号",
"b".ISBN AS "储存位置",
"b".BOOKNAME AS "书名",
"bt".TYPENAME AS "类型",
"p".PRENAME AS "出版社",
"b".PUBLICTIONTIME AS "出版时间",
"a".AUTNAME AS "作者",
"b".AMOUNT AS "剩余数量"
FROM LIBRARY.BOOK "b"
INNER JOIN LIBRARY.BOOKTYPE "bt" ON "b".TYPENO = "bt".TYPENO
INNER JOIN LIBRARY.PRESS "p" ON "b".PRENO = "p".PRENO
INNER JOIN LIBRARY.AUTHOR "a" ON "b".AUTNO = "a".AUTNO;

-- 2.模糊查询图书的信息
SELECT * 
FROM BOOK_INFO
WHERE BOOKNAME LIKE '%'||'人生'||'%';

-- 3.查询图书馆的库存量
SELECT SUM(AMOUNT)
FROM BOOK;

-- 4.查看指定类型的书
SELECT * 
FROM BOOK_INFO
WHERE TYPENAME = '哲学类';

-- 5.查看还有库存的书
SELECT BOOKNAME,ISBN,TYPENAME,PRENAME,AUTNAME,AMOUNT
FROM BOOK_INFO
WHERE AMOUNT > 0
ORDER BY AMOUNT;

-- 6.查看图书馆借完的书
SELECT BOOKNAME,TYPENAME,PRENAME,AUTNAME,AMOUNT
FROM BOOK_INFO
WHERE AMOUNT = 0
ORDER BY AMOUNT;

-- 7.借书操作 数量-1
UPDATE BOOK SET AMOUNT = (SELECT AMOUNT FROM BOOK WHERE BOOKNO = 45) - 1
WHERE BOOKNO = 45;
-- 验证
SELECT * FROM BOOK WHERE BOOKNO = 45;


-- 8.还书操作 数量+1
UPDATE BOOK SET AMOUNT = (SELECT AMOUNT FROM BOOK WHERE BOOKNO = 45) + 1
WHERE BOOKNO = 45;
-- 验证
SELECT * FROM BOOK WHERE BOOKNO = 45;

-- 9.向图书馆中增加新书
-- ①.先查看数据库中有没有此类的书
SELECT * 
FROM BOOK
WHERE BOOKNAME = '罪与罚';
-- ②.如果没有此类作者 则向AUTHOR表中插入作者信息
INSERT INTO AUTHOR VALUES((SELECT COUNT(*) FROM AUTHOR) + 1,'思妥耶夫斯基','俄国');
-- ③.如果没有此类出版社 则向PRESS表中插入出版社信息
INSERT INTO PRESS VALUES((SELECT COUNT(*) FROM PRESS) + 1,'新华书社');
-- ④.增加新的图书
INSERT INTO BOOK VALUES(
(SELECT COUNT(*) FROM BOOK) + 1, -- 书的编号
(SELECT AUTNO FROM AUTHOR WHERE AUTNAME = '思妥耶夫斯基'), -- 作者编号
(SELECT PRENO FROM PRESS WHERE PRENAME =  '人民邮电出版社' ),-- 出版社编号
6,-- 数量
2004,-- 出版日期
);
```

